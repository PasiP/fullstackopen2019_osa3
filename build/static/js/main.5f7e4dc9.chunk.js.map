{"version":3,"sources":["services/persons.js","components/Filter.js","components/Person.js","components/Numbers.js","index.js"],"names":["baseUrl","axios","get","newObject","post","id","put","headers","delete","Filter","props","console","log","value","filterValue","onChange","handleFilterChange","Person","onClick","personService","then","response","setMessage","name","setTimeout","setPersons","persons","filter","n","catch","error","number","Numbers","newFilter","message","personsToShow","person","toLowerCase","search","map","key","App","useState","newName","setNewName","newNumber","setNewNumber","setNewFilter","useEffect","data","length","className","event","target","onSubmit","preventDefault","personObject","some","window","confirm","idx","findIndex","newPersons","p","concat","type","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5f7e4dc9.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  return axios.get(baseUrl)\n}\n\nconst create = newObject => {\n  return axios.post(baseUrl, newObject)\n}\n\nconst update = (id, newObject) => {\n  return axios.put(`${baseUrl}/${id}`, newObject, { headers: { 'Content-Type': 'application/json' }})\n}\n\nconst deleteItem = (id) => {\n  return axios.delete(`${baseUrl}/${id}`)\n}\n\nexport default {\n  getAll,\n  create,\n  update,\n  deleteItem\n}\n","import React from 'react'\n\n\nconst Filter = (props) => {\n  console.log('Filter ',props)\n  return (\n    <div>\n    filter shown with <input\n            value={props.filterValue}\n            onChange={props.handleFilterChange}\n          />\n    </div>\n  )\n}\n\nexport default Filter\n","import React from 'react'\nimport personService from '../services/persons'\n\n\nconst Person = (props) => {\n  console.log('Person ', props);\n  const handleClick = () => {\n    console.log('button ', props.id ,' clicked')\n    personService\n      .deleteItem(props.id)\n      .then(response => {\n          props.setMessage([`${props.name} was removed`, 'note'])\n          setTimeout(() => {\n            props.setMessage([])\n          }, 5000)\n          props.setPersons(props.persons.filter(n => n.id !== props.id))\n      })\n      .catch(error => {\n        console.log('delete failed')\n        props.setMessage([`${props.name} has alredy been removed from server`, 'err'])\n        setTimeout(() => {\n          props.setMessage([])\n        }, 5000)\n      })\n  }\n\n  return (\n    <li><button onClick={handleClick}>delete</button> {props.name} {props.number}</li>\n  )\n}\n\nexport default Person\n","import React from 'react'\nimport Person from './Person'\n\n\nconst Numbers = ({persons, setPersons, newFilter, message, setMessage}) => {\n  console.log('Numbers ', message, setMessage)\n\n  const personsToShow = persons.filter(person => person.name.toLowerCase().search(newFilter.toLowerCase()) !== -1)\n\n  const rows = () =>  personsToShow.map(person => {\n    return(\n      <Person\n        key={person.id}\n        id={person.id}\n        name={person.name}\n        number={person.number}\n        message={message}\n        setMessage={setMessage}\n        persons={persons}\n        setPersons={setPersons}\n      />\n    )\n  }\n  )\n\n  return (\n    <ul>\n      {rows()}\n    </ul>\n  )\n}\n\nexport default Numbers\n","import React, { useState, useEffect } from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport personService from './services/persons'\nimport Filter from './components/Filter'\nimport Numbers from './components/Numbers'\n\nconst App = () => {\n  const [ persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newFilter, setNewFilter ] = useState('')\n  const [message, setMessage] = useState([])\n\n\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(response => {\n        setPersons(response.data)\n      })\n  }, [])\n  console.log('render', persons.length, 'persons')\n\n  const Notification = () => {\n    if (message.length <= 0) {\n      return null\n    }\n\n    if(message[1] === 'err') {\n      return (\n        <div className=\"error\">\n          {message[0]}\n        </div>\n      )\n    } else {\n      return (\n        <div className=\"notification\">\n          {message[0]}\n        </div>\n      )\n    }\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    console.log('button clicked', event.target)\n    const personObject = {\n      name: newName,\n      number: newNumber,\n      id:'',\n    }\n\n    if(persons.some(person => person.name === newName)) {\n      if(window.confirm(`${newName} is already added to phonebook. Replace the old number with a new one?` )) {\n        const idx = persons.findIndex(person => person.name === newName)\n        const id = persons[idx].id\n        personObject.id=id\n        const newPersons = persons.map(p=> p.name === newName? personObject : p)\n\n        personService\n        .update(id, personObject)\n        .then(response => {\n            setPersons(newPersons)\n            setMessage([`${newName} updated`, 'note'])\n            setTimeout(() => {\n              setMessage([])\n            }, 5000)\n            setNewName('')\n            setNewNumber('')\n            console.log('RESPONSE:', response.data);\n          })\n      } else {\n        console.log(\"user clicked cancel\");\n      }\n    } else {\n      personService\n      .create(personObject)\n      .then(response => {\n          setPersons(persons.concat(response.data))\n          console.log('PERSONSERVICE CREATE')\n          setMessage([`${newName} created`, 'note'])\n          setTimeout(() => {\n            setMessage([])\n          }, 5000)\n          setNewName('')\n          setNewNumber('')\n      })\n      .catch( error => {\n        console.log('ERR ', error.response.data);\n        setMessage([error.response.data.error, 'err'])\n        setTimeout(() => {\n          setMessage([])\n        }, 5000)\n      })\n    }\n  }\n\n\n  const handleNameChange = (event) => {\n      console.log(event.target.value)\n      setNewName(event.target.value)\n    }\n\n    const handleNumberChange = (event) => {\n        console.log(event.target.value)\n        setNewNumber(event.target.value)\n      }\n\n    const handleFilterChange = (event) => {\n      console.log('filter: ',event.target.value)\n      setNewFilter(event.target.value)\n    }\n\n  return (\n    <div>\n      <Notification />\n      <h2>Phonebook</h2>\n      <Filter filterValue={newFilter} handleFilterChange={handleFilterChange} />\n      <form onSubmit={addPerson}>\n        <div>\n          name: <input\n                  value={newName}\n                  onChange={handleNameChange}\n                />\n        </div>\n        <div>\n          number: <input\n                  value={newNumber}\n                  onChange={handleNumberChange}\n                />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n      <h2>Numbers</h2>\n      <Numbers persons={persons} setPersons={setPersons} message={message} setMessage={setMessage} newFilter ={newFilter} />\n    </div>\n  )\n\n}\n\nexport default App\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}